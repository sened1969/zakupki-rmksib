# üéØ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

## –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫—É—Ä–∞—Ç–æ—Ä–∞

---

## ‚ùì –í–æ–ø—Ä–æ—Å 1: –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è LLM?

**–û—Ç–≤–µ—Ç:** –ü—è—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
1. `analyze_lot` ‚Äî **–ë–´–°–¢–†–´–ô –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞** (–∫–æ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞)
2. `analyze_documentation` ‚Äî **–î–ï–¢–ê–õ–¨–ù–´–ô –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞** (–∫–æ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞)
3. `search_suppliers_perplexity` ‚Äî –ø–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞
4. `analyze_supplier_reliability` ‚Äî –∞–Ω–∞–ª–∏–∑ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
5. `check_nomenclature_match_with_llm` ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –ª–æ—Ç–∞ —Å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü–µ—Ä–≤—ã–µ –¥–≤–∞ ‚Äî —ç—Ç–æ –Ω–µ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–∞, –∞ **–¥–≤–∞ —Ä–µ–∂–∏–º–∞ –æ–¥–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞** —Å —Ä–∞–∑–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ì–¥–µ –ø–æ–∫–∞–∑–∞—Ç—å:**
- –î–∏–∞–≥—Ä–∞–º–º–∞: `ALGORITHM_DIAGRAM.html` ‚Üí –ø–µ—Ä–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
- –ö–æ–¥: 
  - `services/ai/perplexity.py` ‚Üí —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö ~700, ~757, ~840
  - `services/ai/commercial_proposal_analysis.py` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `analyze_supplier_reliability`
  - `config/nomenclature.py` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `check_nomenclature_match_with_llm`

---

## ‚ùì –í–æ–ø—Ä–æ—Å 2: –ö–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏ –æ—Ç–∫—É–¥–∞?

**–û—Ç–≤–µ—Ç:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö | –ß—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è |
|----------|----------------|----------------|
| `analyze_lot`<br/>(–ë–´–°–¢–†–´–ô) | –û–±—ä–µ–∫—Ç `Lot` –∏–∑ –ë–î<br/>(–∫–∞—Ä—Ç–æ—á–∫–∞ –ª–æ—Ç–∞) | `lot.id`, `lot_number`, `platform_name`, `customer`, `budget`, `deadline`, `status`, `nomenclature`, `description` + `budget_min`, `budget_max`, `overhead_pct`<br/>**4 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ—Ü–µ–Ω–∫–∏** |
| `analyze_documentation`<br/>(–î–ï–¢–ê–õ–¨–ù–´–ô) | –û–±—ä–µ–∫—Ç `Lot` + —Ñ–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | –í—Å–µ –ø–æ–ª—è –ª–æ—Ç–∞ + `documentation_text` (—Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–∞)<br/>**5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ü–µ–Ω–∫–∏**<br/>**–†–∞—Å—á—ë—Ç –±—é–¥–∂–µ—Ç–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º** |
| `search_suppliers_perplexity` | –°—Ç—Ä–æ–∫–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `product_name` (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞), `max_suppliers` (–ª–∏–º–∏—Ç) |
| `analyze_supplier_reliability` | –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ –ö–ü | `supplier_name` (–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞), `supplier_inn` (–ò–ù–ù, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `check_nomenclature_match_with_llm` | –î–∞–Ω–Ω—ã–µ –ª–æ—Ç–∞ + –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `lot_title`, `lot_nomenclature`, `lot_description`, `nomenclature_list` (–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫)<br/>**–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** |

**–ì–¥–µ –ø–æ–∫–∞–∑–∞—Ç—å:**
- –ö–æ–¥: `services/ai/perplexity.py` ‚Üí –±–ª–æ–∫–∏ `logger.debug` —Å —Ç–µ–≥–æ–º `[DATA SOURCES]`
- –°—Ç—Ä–æ–∫–∏: ~726 (analyze_lot), ~784 (analyze_documentation), ~859 (search_suppliers)
- `services/ai/commercial_proposal_analysis.py` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `analyze_supplier_reliability`
- `config/nomenclature.py` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `check_nomenclature_match_with_llm` (—Å—Ç—Ä–æ–∫–∞ ~140)

---

## ‚ùì –í–æ–ø—Ä–æ—Å 3: –ö–∞–∫–æ–π –ø—Ä–æ–º–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

**–û—Ç–≤–µ—Ç:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | System –ø—Ä–æ–º–ø—Ç | User –ø—Ä–æ–º–ø—Ç | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å |
|----------|---------------|-------------|-------------|
| `analyze_lot`<br/>(–ë–´–°–¢–†–´–ô) | `ENHANCED_ANALYSIS_SYSTEM_PROMPT` | `ENHANCED_ANALYSIS_USER_TEMPLATE` | ‚ö†Ô∏è –£–∫–∞–∑–∞–Ω–∏–µ: "–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"<br/>–ë–ª–æ–∫ `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>`<br/>–§–æ—Ä–º—É–ª–∞: –†√ó0.2 + –°√ó0.3 + –ë√ó0.3 + –§√ó0.2 |
| `analyze_documentation`<br/>(–î–ï–¢–ê–õ–¨–ù–´–ô) | `DOCUMENTATION_ANALYSIS_SYSTEM_PROMPT` | `DOCUMENTATION_ANALYSIS_USER_TEMPLATE` | ‚úÖ –£–∫–∞–∑–∞–Ω–∏–µ: "–¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"<br/>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—é –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –∏ —Ä–∞—Å—á—ë—Ç—É –±—é–¥–∂–µ—Ç–∞<br/>–§–æ—Ä–º—É–ª–∞: –†√ó0.2 + –°√ó0.25 + –ë√ó0.25 + –¢√ó0.15 + –§√ó0.15 |
| `search_suppliers` | `SUPPLIERS_SEARCH_SYSTEM_PROMPT` | `SUPPLIERS_SEARCH_USER_TEMPLATE` | –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ |
| `analyze_supplier_reliability` | System –ø—Ä–æ–º–ø—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ | User –ø—Ä–æ–º–ø—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ | –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: –†–ï–ô–¢–ò–ù–ì –∏ –ò–ù–§–û–†–ú–ê–¶–ò–Ø |

**–ì–¥–µ –ø–æ–∫–∞–∑–∞—Ç—å:**
- –ö–æ–¥: `services/ai/perplexity.py` ‚Üí –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∏ ~50, ~223, ~400)
- `services/ai/commercial_proposal_analysis.py` ‚Üí –ø—Ä–æ–º–ø—Ç—ã –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `analyze_supplier_reliability`
- –ë–ª–æ–∫ `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>`: —Å—Ç—Ä–æ–∫–∞ ~130 –≤ `ENHANCED_ANALYSIS_USER_TEMPLATE`
- –õ–æ–≥–∏: —Ç–µ–≥ `[LLM PROMPT]` –≤ `call_llm_scenario()` (—Å—Ç—Ä–æ–∫–∞ ~598)

---

## ‚ùì –í–æ–ø—Ä–æ—Å 4: –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram-–±–æ—Ç–µ?

**–û—Ç–≤–µ—Ç:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ |
|----------|-------------------|
| `analyze_lot`<br/>(–ë–´–°–¢–†–´–ô) | ‚ö†Ô∏è –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó<br>üìä –û—Ü–µ–Ω–∫–∏ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (4)<br>üéØ –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞<br>‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è<br>üìã –†–∏—Å–∫–∏<br>üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏<br>üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ |
| `analyze_documentation`<br/>(–î–ï–¢–ê–õ–¨–ù–´–ô) | ‚úÖ –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó<br>üìÑ –ò–∑–≤–ª–µ—á—ë–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è<br>üí∞ –†–∞—Å—á—ë—Ç –±—é–¥–∂–µ—Ç–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º<br>üìä –û—Ü–µ–Ω–∫–∏ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (5)<br>üéØ –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞<br>‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
| `search_suppliers` | –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:<br>üåê –°–∞–π—Ç<br>üìß Email<br>üì± –¢–µ–ª–µ—Ñ–æ–Ω<br>üìç –ê–¥—Ä–µ—Å<br>üèô –ì–æ—Ä–æ–¥<br>üÜî –ò–ù–ù |
| `analyze_supplier_reliability` | –†–ï–ô–¢–ò–ù–ì: —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 100<br>–ò–ù–§–û–†–ú–ê–¶–ò–Ø: —Ç–µ–∫—Å—Ç–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ |

**–ì–¥–µ –ø–æ–∫–∞–∑–∞—Ç—å:**
- Telegram-–±–æ—Ç: –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ö–ü: `bot/handlers/commercial_proposals.py` ‚Üí `compare_proposals`
- –õ–æ–≥–∏: —Ç–µ–≥ `[LLM RESULT]` –≤ `call_llm_scenario()`
- –§–æ—Ä–º–∞—Ç: –±–ª–æ–∫ `<–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>` –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö (—Å—Ç—Ä–æ–∫–∞ ~180)

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–∞

1. **–î–≤–∞ —Ä–µ–∂–∏–º–∞ –∞–Ω–∞–ª–∏–∑–∞** ‚Äî –±—ã—Å—Ç—Ä—ã–π (analyze_lot) –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π (analyze_documentation) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º —Ä–µ–∂–∏–º–∞
2. **–ê–ª–≥–æ—Ä–∏—Ç–º —è–≤–Ω–æ –æ–ø–∏—Å–∞–Ω** ‚Äî –±–ª–æ–∫ `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>` –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
3. **–ï–¥–∏–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ `call_llm_scenario()`
4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —à–∞–±–ª–æ–Ω—ã, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –≤—ã–∑–æ–≤–æ–º

---

## üìç –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–¥—É

| –ß—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ |
|--------------|------|--------|
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–æ–º–ø—Ç–æ–≤ | `services/ai/perplexity.py` | ~50, ~223, ~400 |
| –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `services/ai/perplexity.py` | ~577 (`call_llm_scenario`) |
| analyze_lot | `services/ai/perplexity.py` | ~700 |
| analyze_documentation | `services/ai/perplexity.py` | ~757 |
| search_suppliers | `services/ai/perplexity.py` | ~840 |
| analyze_supplier_reliability | `services/ai/commercial_proposal_analysis.py` | ~8 |
| –ë–ª–æ–∫ –ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê | `services/ai/perplexity.py` | ~130 |

---

## üé¨ –ü–æ—Ä—è–¥–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (5-7 –º–∏–Ω—É—Ç)

1. **–î–∏–∞–≥—Ä–∞–º–º–∞** ‚Üí –æ–±—â–∞—è —Å—Ö–µ–º–∞ (1 –º–∏–Ω)
2. **–ö–æ–¥** ‚Üí —á–µ—Ç—ã—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏ (1 –º–∏–Ω)
3. **–õ–æ–≥–∏** ‚Üí –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (1 –º–∏–Ω)
4. **–ü—Ä–æ–º–ø—Ç—ã** ‚Üí –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã + –∞–ª–≥–æ—Ä–∏—Ç–º (1 –º–∏–Ω)
5. **Telegram-–±–æ—Ç** ‚Üí —Ä–µ–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (2-3 –º–∏–Ω)

---

## üí° –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

- **–ù–µ—Ç –ª–æ–≥–æ–≤?** ‚Üí –ü–æ–∫–∞–∂–∏—Ç–µ –∫–æ–¥, —Ç–∞–º –≤–∏–¥–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ë–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?** ‚Üí –ü–æ–∫–∞–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –≤ –ø—Ä–æ–º–ø—Ç–µ
- **–ü—Ä–æ–º–ø—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π?** ‚Üí –ü–æ–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ –±–ª–æ–∫ `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>`

---

**–£–¥–∞—á–∏! üöÄ**

