<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# –ø–æ–¥–≥–æ—Ç–æ–≤—å —à–∞–±–ª–æ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç‚Äë–ø—Ä–æ–º–ø—Ç–æ–≤ –≤ –∫–æ–¥–µ (—Å —É–∂–µ –≤–ø–∏—Å–∞–Ω–Ω—ã–º –±–ª–æ–∫–æ–º¬†<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>), —á—Ç–æ–±—ã —Ç—ã –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏–ª –∏—Ö –≤ Cursor.

–ù–∏–∂–µ ‚Äî –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ `perplexity.py`. –û–Ω–∏ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–ª–æ–∫ `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>` –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å —Ç–≤–æ–µ–π —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–æ–π (`Lot`, –¥–∏–∞–ø–∞–∑–æ–Ω –±—é–¥–∂–µ—Ç–∞, —Å–∞–Ω–∫—Ü–∏–∏ –∏ —Ç.–¥.).

–¢—ã –º–æ–∂–µ—à—å:

- –õ–∏–±–æ –≤—ã–Ω–µ—Å—Ç–∏ –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `prompts.py`,
- –õ–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–µ `perplexity.py` (–ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–æ–≤).

***

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –õ–û–¢–ê (enhanced)

```python
# =========================
# PROMPTS: ANALYZE LOT
# =========================

ENHANCED_ANALYSIS_SYSTEM_PROMPT = """
–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∑–∞–∫—É–ø–∫–∞–º –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –≤ –æ–±–ª–∞—Å—Ç–∏:
- –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤,
- —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞,
- –ª–æ–≥–∏—Å—Ç–∏–∫–∏,
- —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç–≤–µ—Ç–∞–º:
- –û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Ç–æ—á–Ω–æ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É.
- –ò–∑–±–µ–≥–∞–π –ª–∏—à–Ω–∏—Ö –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π –∏ "–≤–æ–¥—ã".
- –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ (0 = –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫/–ø—Ä–æ–±–ª–µ–º–∞, 10 = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫/–ø—Ä–æ–±–ª–µ–º–∞).
- –í—Å–µ–≥–¥–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ.
"""

ENHANCED_ANALYSIS_USER_TEMPLATE = """
<–î–ê–ù–ù–´–ï –õ–û–¢–ê>
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {platform_name}
–ù–æ–º–µ—Ä –ª–æ—Ç–∞: {lot_number}
–ù–∞–∑–≤–∞–Ω–∏–µ: {title}
–ó–∞–∫–∞–∑—á–∏–∫: {customer}
–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞: {nomenclature}
–ë—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ (‚ÇΩ): {budget_value}
–ë—é–¥–∂–µ—Ç —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ {overhead_pct}% (‚ÇΩ): {budget_with_overhead}
–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ –±—é–¥–∂–µ—Ç–∞ (‚ÇΩ): –æ—Ç {effective_budget_min} –¥–æ {effective_budget_max}
–î–µ–¥–ª–∞–π–Ω: {deadline}
–°—Ç–∞—Ç—É—Å: {status}

–û–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–∞:
{description}
</–î–ê–ù–ù–´–ï –õ–û–¢–ê>

<–ó–ê–î–ê–ß–ê>
–ü—Ä–æ–≤–µ–¥–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è –≤ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ—Ç–∞.
–ù—É–∂–Ω–æ:
- –û—Ü–µ–Ω–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ (0 = –º–∏–Ω–∏–º—É–º —Ä–∏—Å–∫–∞/–ø—Ä–æ–±–ª–µ–º, 10 = –º–∞–∫—Å–∏–º—É–º —Ä–∏—Å–∫–∞/–ø—Ä–æ–±–ª–µ–º).
- –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ.
- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —á—ë—Ç–∫—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é: —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å / —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é / –Ω–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.
</–ó–ê–î–ê–ß–ê>

<–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>
1. –†–ï–î–ö–û–°–¢–¨/–ù–ò–®–ï–í–û–°–¢–¨ –¢–û–í–ê–†–ê (0-10)
   –û—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–æ–≤—ã–º/—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∏–ª–∏ –Ω–∏—à–µ–≤—ã–º/—Ä–µ–¥–∫–∏–º.
   –£—á–∏—Ç—ã–≤–∞–π:
   - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤,
   - –Ω–∞–ª–∏—á–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ (–ì–û–°–¢, ISO, DIN),
   - –Ω–∞–ª–∏—á–∏–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, –æ—Å–æ–±—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –¥–æ–ø—É—Å–∫–æ–≤,
   - –æ–±—ä—ë–º –∑–∞–∫—É–ø–∫–∏ –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.

2. –†–ò–°–ö–ò –°–ê–ù–ö–¶–ò–ô (0-10)
   –û—Ü–µ–Ω–∏ —Ä–∏—Å–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–∞–Ω–∫—Ü–∏—è–º–∏ —Å—Ç—Ä–∞–Ω –ï–≤—Ä–æ–ø–µ–π—Å–∫–æ–≥–æ —Å–æ—é–∑–∞ –∏ —Å—Ç—Ä–∞–Ω, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —ç—Ç–∏ —Å–∞–Ω–∫—Ü–∏–∏.
   –£—á–∏—Ç—ã–≤–∞–π:
   - —Å—Ç—Ä–∞–Ω—É –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤,
   - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ—Å—Ç—å (—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, —Å—ã—Ä—å—ë, —Ç–æ–≤–∞—Ä—ã –¥–≤–æ–π–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è),
   - –≤–æ–∑–º–æ–∂–Ω–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏,
   - –¥–æ–ª—é –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

3. –ü–†–ï–í–´–®–ï–ù–ò–ï/–ê–î–ï–ö–í–ê–¢–ù–û–°–¢–¨ –ë–Æ–î–ñ–ï–¢–ê (0-10)
   –û—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ (—Å —É—á—ë—Ç–æ–º –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ {overhead_pct}%) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ü–µ–ª–µ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
   –æ—Ç {effective_budget_min} ‚ÇΩ –¥–æ {effective_budget_max} ‚ÇΩ, –∞ —Ç–∞–∫–∂–µ —Å—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã.
   –£—á–∏—Ç—ã–≤–∞–π:
   - —Ä–∏—Å–∫ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ–≥–æ –±—é–¥–∂–µ—Ç–∞ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –º–∞—Ä–∂–∞, –¥–µ–º–ø–∏–Ω–≥),
   - —Ä–∏—Å–∫ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ–≥–æ –±—é–¥–∂–µ—Ç–∞ (–∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, —Ä–∏—Å–∫ "–ø–µ—Ä–µ–≥—Ä–µ—Ç–æ–≥–æ" –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞),
   - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±—é–¥–∂–µ—Ç–∞ —Å—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω—ã–º —Ü–µ–Ω–∞–º –ø–æ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–µ.

4. –î–†–£–ì–ò–ï –°–£–©–ï–°–¢–í–ï–ù–ù–´–ï –§–ê–ö–¢–û–†–´ (0-10)
   –û—Ü–µ–Ω–∏ –ø—Ä–æ—á–∏–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:
   - —Å—Ä–æ–∫–∏ –ø–æ—Å—Ç–∞–≤–∫–∏,
   - –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å,
   - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É –∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º,
   - —Ä–µ–ø—É—Ç–∞—Ü–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞,
   - —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã,
   - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Å—Ä–µ–¥–∞.
</–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>

<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>
–û—Ü–µ–Ω–∏ –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ —Å–ª–µ–¥—É—é—â–µ–π –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏:

1. –†–ï–î–ö–û–°–¢–¨/–ù–ò–®–ï–í–û–°–¢–¨ –¢–û–í–ê–†–ê:
   - –ù–∏–∑–∫–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å (0‚Äì3/10):
     * –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–ø—Ä–æ—Å–∞.
     * –ï—Å—Ç—å –ø—Ä—è–º—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –ì–û–°–¢, ISO, DIN –∏ —Ç.–ø.
     * –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –Ω–∞ —Ä—ã–Ω–∫–µ.
     * –ú–∞—Ç–µ—Ä–∏–∞–ª—ã: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ (–æ–±—ã—á–Ω—ã–µ —Å—Ç–∞–ª–∏, –∞–ª—é–º–∏–Ω–∏–π, —Ç–∏–ø–æ–≤—ã–µ –ø–ª–∞—Å—Ç–∏–∫–∏), —Ç–∏–ø–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –¥–æ–ø—É—Å–∫–∏.
   - –°—Ä–µ–¥–Ω—è—è —Ä–µ–¥–∫–æ—Å—Ç—å (4‚Äì6/10):
     * –ß–∞—Å—Ç–∏—á–Ω–æ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è, —É—Å–∏–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã).
     * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ, –Ω–æ –∏—Ö –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (–Ω–µ –º–æ–Ω–æ–ø–æ–ª–∏—è).
     * –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–æ–ø—É—Å–∫–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–µ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö, –Ω–æ –Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ.
   - –í—ã—Å–æ–∫–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å (7‚Äì10/10):
     * –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–ª–∏ –Ω–∏—à–µ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å–æ–±—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏.
     * –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (—Ç–∏—Ç–∞–Ω, —Å–ø–µ—Ü—Å–ø–ª–∞–≤—ã, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∫–µ—Ä–∞–º–∏–∫–∞ –∏ —Ç.–ø.).
     * –ñ—ë—Å—Ç–∫–∏–µ –¥–æ–ø—É—Å–∫–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
     * –û—á–µ–Ω—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (1‚Äì3 —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞).

2. –†–ò–°–ö–ò –°–ê–ù–ö–¶–ò–ô:
   - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ (0‚Äì3/10):
     * –¢–æ–≤–∞—Ä—ã –º–∞—Å—Å–æ–≤–æ–≥–æ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
     * –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è ‚Äî –†–æ—Å—Å–∏—è –∏–ª–∏ —Å—Ç—Ä–∞–Ω—ã, –Ω–µ —É—á–∞—Å—Ç–≤—É—é—â–∏–µ –≤ —Å–∞–Ω–∫—Ü–∏—è—Ö.
     * –ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å–≤—è–∑–∏ —Å –í–ü–ö, –¥–≤–æ–π–Ω—ã–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º, –≤—ã—Å–æ–∫–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–æ–π.
   - –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ (4‚Äì6/10):
     * –¢–æ–≤–∞—Ä—ã —Å –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, –Ω–æ –±–µ–∑ –ø—Ä—è–º–æ–π —Å–≤—è–∑–∏ —Å –í–ü–ö.
     * –í—ã—Å–æ–∫–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –ü–û.
     * –í–æ–∑–º–æ–∂–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É, –Ω–æ —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —è–≤–Ω—ã—Ö —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–∞—Ö.
   - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ (7‚Äì10/10):
     * –¢–æ–≤–∞—Ä—ã –∏–∑ —Å—Ç—Ä–∞–Ω, –∞–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ —Å–∞–Ω–∫—Ü–∏—è—Ö, —Å –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏.
     * –¢–æ–≤–∞—Ä—ã –¥–≤–æ–π–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –æ–±–æ—Ä–æ–Ω–Ω–æ–≥–æ –∏–ª–∏ –∞–≤–∏–∞—Ü–∏–æ–Ω–Ω–æ-–∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
     * –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–ø–∞–¥–∞—é—â–∏–µ –ø–æ–¥ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.

3. –ü–†–ï–í–´–®–ï–ù–ò–ï/–ê–î–ï–ö–í–ê–¢–ù–û–°–¢–¨ –ë–Æ–î–ñ–ï–¢–ê:
   - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ (0‚Äì3/10):
     * –ë—é–¥–∂–µ—Ç —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ü–µ–ª–µ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞.
     * –ë—é–¥–∂–µ—Ç –±–ª–∏–∑–æ–∫ –∫ —Å—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω–æ–º—É —É—Ä–æ–≤–Ω—é.
   - –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ (4‚Äì6/10):
     * –ë—é–¥–∂–µ—Ç –∑–∞–º–µ—Ç–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π).
     * –ï—Å—Ç—å —Ä–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–ª–∏ "–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ–π" –∑–∞–∫—É–ø–∫–∏.
   - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ (7‚Äì10/10):
     * –ë—é–¥–∂–µ—Ç —Å–∏–ª—å–Ω–æ –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–ª–∏ —Å–∏–ª—å–Ω–æ –≤—ã—à–µ —Ä–∞–∑—É–º–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
     * –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –Ω–µ–≤—ã–≥–æ–¥–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è.

4. –î–†–£–ì–ò–ï –°–£–©–ï–°–¢–í–ï–ù–ù–´–ï –§–ê–ö–¢–û–†–´:
   - –£—á–∏—Ç—ã–≤–∞–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
     * —Å—Ä–æ–∫–∏ –ø–æ—Å—Ç–∞–≤–∫–∏ (—á–µ–º –æ–Ω–∏ –∂—ë—Å—Ç—á–µ –∏ –∫–æ—Ä–æ—á–µ, —Ç–µ–º –≤—ã—à–µ —Ä–∏—Å–∫),
     * —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫–∏ (—É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã, —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏),
     * —Ä–µ–ø—É—Ç–∞—Ü–∏—é –∑–∞–∫–∞–∑—á–∏–∫–∞ (–∑–∞–¥–µ—Ä–∂–∫–∏ –æ–ø–ª–∞—Ç, —Å–ø–æ—Ä–Ω—ã–µ –∫–µ–π—Å—ã),
     * —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É –∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º (–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ, –¥–æ—Ä–æ–≥–∏–µ –≤ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏),
     * –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é —Å—Ä–µ–¥—É (—á–µ–º –≤—ã—à–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∏ –º–µ–Ω–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, —Ç–µ–º –≤—ã—à–µ —Ä–∏—Å–∫).
</–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>

<–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>
–†–∞—Å—Å—á–∏—Ç–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ = (–†–µ–¥–∫–æ—Å—Ç—å √ó 0.2) + (–°–∞–Ω–∫—Ü–∏–∏ √ó 0.3) + (–ë—é–¥–∂–µ—Ç √ó 0.3) + (–î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã √ó 0.2)

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
- 0.0‚Äì4.0  ‚Üí –Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫ ‚Üí —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è "–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å".
- 4.1‚Äì6.0 ‚Üí —Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ ‚Üí —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è "–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é".
- >6.0    ‚Üí –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ ‚Üí —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è "–ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å".
</–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>

<–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>
–°—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

üìä –û–¶–ï–ù–ö–ò –ü–û –ü–ê–†–ê–ú–ï–¢–†–ê–ú:
1. –†–µ–¥–∫–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
2. –†–∏—Å–∫–∏ —Å–∞–Ω–∫—Ü–∏–π: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
3. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Å —Ä–∞—Å—á–µ—Ç–æ–º]
4. –î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]

üéØ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê –†–ò–°–ö–ê: X.X/10
[–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: –Ω–∏–∑–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫]

‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: [–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å/–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é/–ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å]
[–ö—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è]

üìã –ö–õ–Æ–ß–ï–í–´–ï –†–ò–°–ö–ò:
- [2‚Äì4 –ø—É–Ω–∫—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–ø–æ—Å–æ–±–æ–≤ —Å–Ω–∏–∂–µ–Ω–∏—è]

üí° –í–û–ó–ú–û–ñ–ù–û–°–¢–ò/–í–´–ì–û–î–´:
- [2‚Äì4 –ø—É–Ω–∫—Ç–∞]

üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:
- [3‚Äì5 –º–∞—Ä–∫–µ—Ä–æ–≤, –∫–æ—Ä–æ—Ç–∫–æ]
</–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>
"""
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ (–≤–º–µ—Å—Ç–æ `_lot_to_enhanced_prompt`):

```python
def _lot_to_enhanced_prompt(lot: Lot, budget_min: int | None = None, budget_max: int | None = None) -> str:
    DEFAULT_BUDGET_MIN = 100000
    DEFAULT_BUDGET_MAX = 30000000

    effective_budget_min = budget_min if budget_min is not None else DEFAULT_BUDGET_MIN
    effective_budget_max = budget_max if budget_max is not None else DEFAULT_BUDGET_MAX
    overhead_pct = settings.AI_OVERHEAD_PERCENT

    budget_with_overhead = float(lot.budget) * (1 + overhead_pct / 100)

    return ENHANCED_ANALYSIS_USER_TEMPLATE.format(
        platform_name=lot.platform_name,
        lot_number=lot.lot_number,
        title=lot.title,
        customer=lot.customer or "–Ω–µ —É–∫–∞–∑–∞–Ω",
        nomenclature=", ".join(lot.nomenclature or []) or "–Ω–µ —É–∫–∞–∑–∞–Ω–∞",
        budget_value=f"{lot.budget:,.0f}",
        budget_with_overhead=f"{budget_with_overhead:,.0f}",
        overhead_pct=overhead_pct,
        effective_budget_min=f"{effective_budget_min:,}",
        effective_budget_max=f"{effective_budget_max:,}",
        deadline=lot.deadline,
        status=lot.status,
        description=lot.description or "–Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è",
    )
```

–ò –≤ `analyze_lot`:

```python
async def analyze_lot(lot: Lot, enhanced: bool = True, budget_min: int | None = None, budget_max: int | None = None) -> str:
    if enhanced:
        user_content = _lot_to_enhanced_prompt(lot, budget_min, budget_max)
        messages = [
            {"role": "system", "content": ENHANCED_ANALYSIS_SYSTEM_PROMPT},
            {"role": "user", "content": user_content},
        ]
        return await ask_perplexity(messages, max_tokens=2000)
    else:
        # –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–∫ —Ä–∞–Ω—å—à–µ
        ...
```


***

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ö–û–ù–ö–£–†–°–ù–û–ô –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò

```python
# =========================
# PROMPTS: ANALYZE DOCUMENTATION
# =========================

DOCUMENTATION_ANALYSIS_SYSTEM_PROMPT = """
–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∑–∞–∫—É–ø–∫–∞–º –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏:
- –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏,
- –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤,
- —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞,
- –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç–≤–µ—Ç–∞–º:
- –û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Ç–æ—á–Ω–æ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É.
- –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –æ—Ü–µ–Ω–∫–∏ –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ.
- –í—Å–µ–≥–¥–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ.
"""

DOCUMENTATION_ANALYSIS_USER_TEMPLATE = """
–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤ —É—á–∞—Å—Ç–∏—è –≤ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä–µ.

<–î–ê–ù–ù–´–ï –õ–û–¢–ê>
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {platform_name}
–ù–æ–º–µ—Ä –ª–æ—Ç–∞: {lot_number}
–ù–∞–∑–≤–∞–Ω–∏–µ: {title}
–ó–∞–∫–∞–∑—á–∏–∫: {customer}
–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (–∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –ª–æ—Ç–∞): {nomenclature}
–ë—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ (‚ÇΩ): {budget_value}
–ë—é–¥–∂–µ—Ç —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ {overhead_pct}% (‚ÇΩ): {budget_with_overhead}
–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ –±—é–¥–∂–µ—Ç–∞ (‚ÇΩ): –æ—Ç {effective_budget_min} –¥–æ {effective_budget_max}
–î–µ–¥–ª–∞–π–Ω: {deadline}
–°—Ç–∞—Ç—É—Å: {status}

–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–∞:
{lot_description}
</–î–ê–ù–ù–´–ï –õ–û–¢–ê>

<–ö–û–ù–ö–£–†–°–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø>
–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–µ–∑–∞–Ω –ø–æ –¥–ª–∏–Ω–µ):

{documentation_preview}
</–ö–û–ù–ö–£–†–°–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø>

<–ó–ê–î–ê–ß–ê>
1. –ò–∑–≤–ª–µ–∫–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
   - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤,
   - –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è,
   - –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏,
   - —É—Å–ª–æ–≤–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å—Ä–æ–∫–∏,
   - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≥–∞—Ä–∞–Ω—Ç–∏—è–º –∏ —Å–µ—Ä–≤–∏—Å—É,
   - –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –∑–∞—è–≤–æ–∫,
   - –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.

2. –î–ª—è –ö–ê–ñ–î–û–ì–û —Ç–æ–≤–∞—Ä–∞:
   - –æ–ø—Ä–µ–¥–µ–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ,
   - –æ–ø—Ä–µ–¥–µ–ª–∏ —Å—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω—É—é —Ü–µ–Ω—É –∑–∞ –µ–¥–∏–Ω–∏—Ü—É (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö),
   - —Ä–∞—Å—Å—á–∏—Ç–∞–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó —Ü–µ–Ω–∞.

3. –†–∞—Å—Å—á–∏—Ç–∞–π –æ–±—â–∏–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º.

4. –û—Ü–µ–Ω–∏ —Ä–∏—Å–∫–∏ –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –Ω–∏–∂–µ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞.
</–ó–ê–î–ê–ß–ê>

<–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>
1. –†–ï–î–ö–û–°–¢–¨/–ù–ò–®–ï–í–û–°–¢–¨ –¢–û–í–ê–†–ê (0-10)
   –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∞–Ω–∞–ª–∏–∑—É –ª–æ—Ç–∞: –æ—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —è–≤–ª—è—é—Ç—Å—è –º–∞—Å—Å–æ–≤—ã–º–∏ –∏–ª–∏ –Ω–∏—à–µ–≤—ã–º–∏, —É—á–∏—Ç—ã–≤–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –¥–æ–ø—É—Å–∫–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤.

2. –†–ò–°–ö–ò –°–ê–ù–ö–¶–ò–ô (0-10)
   –û—Ü–µ–Ω–∏ —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º –∏ –∫–ª—é—á–µ–≤—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:
   - —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è,
   - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ—Å—Ç—å (—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –í–ü–ö, –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ),
   - –≤–æ–∑–º–æ–∂–Ω–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –ø–æ–¥ —Å–∞–Ω–∫—Ü–∏–∏.

3. –ü–†–ï–í–´–®–ï–ù–ò–ï/–ê–î–ï–ö–í–ê–¢–ù–û–°–¢–¨ –ë–Æ–î–ñ–ï–¢–ê (0-10)
   –°—Ä–∞–≤–Ω–∏:
   - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –±—é–¥–∂–µ—Ç–∞ (—Å—É–º–º–∞ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º),
   - –±—é–¥–∂–µ—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏,
   - –±—é–¥–∂–µ—Ç —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ {overhead_pct}%,
   - —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω {effective_budget_min}‚Äì{effective_budget_max} ‚ÇΩ.

4. –°–õ–û–ñ–ù–û–°–¢–¨ –¢–ï–•–ù–ò–ß–ï–°–ö–ò–• –¢–†–ï–ë–û–í–ê–ù–ò–ô (0-10)
   –û—Ü–µ–Ω–∏:
   - —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π,
   - –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤,
   - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏—Å–ø—ã—Ç–∞–Ω–∏—è–º, –∫–æ–Ω—Ç—Ä–æ–ª—é, –¥–æ–ø—É—Å–∫–∞–µ–º—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º.

5. –î–†–£–ì–ò–ï –°–£–©–ï–°–¢–í–ï–ù–ù–´–ï –§–ê–ö–¢–û–†–´ (0-10)
   –£—á–∏—Ç—ã–≤–∞–π:
   - —É—Å–ª–æ–≤–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏,
   - —Ä–µ–ø—É—Ç–∞—Ü–∏—é –∑–∞–∫–∞–∑—á–∏–∫–∞,
   - —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã,
   - —à—Ç—Ä–∞—Ñ–Ω—ã–µ —Å–∞–Ω–∫—Ü–∏–∏, —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä,
   - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é.
</–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>

<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>
–ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â—É—é –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é:

1. –†–ï–î–ö–û–°–¢–¨:
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Å—Å–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã, —Ç–∏–ø–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ä–∞–∑–º–µ—Ä—ã ‚Üí 0‚Äì3/10.
   - –ß–∞—Å—Ç–∏—á–Ω–æ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ ‚Üí 4‚Äì6/10.
   - –ù–∏—à–µ–≤—ã–µ/—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∂—ë—Å—Ç–∫–∏–µ –¥–æ–ø—É—Å–∫–∏ ‚Üí 7‚Äì10/10.

2. –°–ê–ù–ö–¶–ò–ò:
   - –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Å–≤—è–∑–∏ —Å –í–ü–ö –∏ –±–µ–∑ –≤—ã—Å–æ–∫–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Üí 0‚Äì3/10.
   - –í—ã—Å–æ–∫–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –∏–º–ø–æ—Ä—Ç –∏–∑ —Å—Ç—Ä–∞–Ω, —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ —Å–∞–Ω–∫—Ü–∏—è—Ö ‚Üí 4‚Äì6/10.
   - –í–ü–ö, –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, —è–≤–Ω–æ —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ ‚Üí 7‚Äì10/10.

3. –ë–Æ–î–ñ–ï–¢:
   - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç ‚âà –±—é–¥–∂–µ—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –ª–µ–∂–∏—Ç –≤ —Ü–µ–ª–µ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ ‚Üí 0‚Äì3/10.
   - –ï—Å—Ç—å –∑–∞–º–µ—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ –∏–ª–∏ –≤—ã—Å–æ–∫–æ), –Ω–æ –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö ‚Üí 4‚Äì6/10.
   - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç —Å–∏–ª—å–Ω–æ —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è —Å –±—é–¥–∂–µ—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ‚Üí 7‚Äì10/10.

4. –°–õ–û–ñ–ù–û–°–¢–¨ –¢–†–ï–ë–û–í–ê–ù–ò–ô:
   - –¢–∏–ø–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ì–û–°–¢/ISO ‚Üí 0‚Äì3/10.
   - –£—Å–∏–ª–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã ‚Üí 4‚Äì6/10.
   - –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ –∏ –¥–æ—Ä–æ–≥–∏–µ –≤ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã ‚Üí 7‚Äì10/10.

5. –î–†–£–ì–ò–ï –§–ê–ö–¢–û–†–´:
   - –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã, –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ —à—Ç—Ä–∞—Ñ—ã ‚Üí 0‚Äì3/10.
   - –ï—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã (—Å—Ä–æ–∫–∏, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, –æ–ø–ª–∞—Ç–∞) ‚Üí 4‚Äì6/10.
   - –ñ—ë—Å—Ç–∫–∏–µ —Å—Ä–æ–∫–∏, —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ç—è–∂—ë–ª—ã–µ —É—Å–ª–æ–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Üí 7‚Äì10/10.
</–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>

<–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>
–†–∞—Å—Å—á–∏—Ç–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ = (–†–µ–¥–∫–æ—Å—Ç—å √ó 0.2) + (–°–∞–Ω–∫—Ü–∏–∏ √ó 0.25) + (–ë—é–¥–∂–µ—Ç √ó 0.25) + (–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è √ó 0.15) + (–î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã √ó 0.15)

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
- 0.0‚Äì4.0  ‚Üí –Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫ ‚Üí "–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å".
- 4.1‚Äì6.0 ‚Üí —Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ ‚Üí "–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é".
- >6.0    ‚Üí –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ ‚Üí "–ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å".
</–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>

<–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>
üìÑ –ò–ó–í–õ–ï–ß–ï–ù–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ò–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò:
‚Ä¢ –ü–µ—Ä–µ—á–µ–Ω—å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã: [—Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º]
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: [–∫–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è]
‚Ä¢ –£—Å–ª–æ–≤–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏: [—Å—Ä–æ–∫–∏, –º–µ—Å—Ç–æ, —É—Å–ª–æ–≤–∏—è]
‚Ä¢ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏: [–∫–∞–∫ –±—É–¥—É—Ç –æ—Ü–µ–Ω–∏–≤–∞—Ç—å—Å—è –∑–∞—è–≤–∫–∏]
‚Ä¢ –î—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: [–≥–∞—Ä–∞–Ω—Ç–∏–∏, —à—Ç—Ä–∞—Ñ—ã, —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä –∏ —Ç.–¥.]

üí∞ –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ô –†–ê–°–ß–Å–¢ –ë–Æ–î–ñ–ï–¢–ê:
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:
  ‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ
  ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
  ‚Ä¢ –°—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É (‚ÇΩ)
  ‚Ä¢ –†–∞—Å—á—ë—Ç –±—é–¥–∂–µ—Ç–∞: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó —Ü–µ–Ω–∞
- –û–±—â–∏–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç: [—Å—É–º–º–∞] ‚ÇΩ
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±—é–¥–∂–µ—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ü–µ–ª–µ–≤—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º.

üìä –û–¶–ï–ù–ö–ò –ü–û –ü–ê–†–ê–ú–ï–¢–†–ê–ú:
1. –†–µ–¥–∫–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
2. –†–∏—Å–∫–∏ —Å–∞–Ω–∫—Ü–∏–π: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
3. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
4. –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
5. –î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]

üéØ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê –†–ò–°–ö–ê: X.X/10
[–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è]

‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: [–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å/–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é/–ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å]
[–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]

üìã –ö–õ–Æ–ß–ï–í–´–ï –†–ò–°–ö–ò:
- [2‚Äì4 –ø—É–Ω–∫—Ç–∞ —Å —Å–ø–æ—Å–æ–±–∞–º–∏ —Å–Ω–∏–∂–µ–Ω–∏—è]

üí° –í–û–ó–ú–û–ñ–ù–û–°–¢–ò/–í–´–ì–û–î–´:
- [2‚Äì4 –ø—É–Ω–∫—Ç–∞]

üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:
- [3‚Äì5 –º–∞—Ä–∫–µ—Ä–æ–≤]
</–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>
"""
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `_documentation_to_prompt`:

```python
def _documentation_to_prompt(lot: Lot, documentation_text: str, budget_min: int | None = None, budget_max: int | None = None) -> str:
    DEFAULT_BUDGET_MIN = 100000
    DEFAULT_BUDGET_MAX = 30000000

    effective_budget_min = budget_min if budget_min is not None else DEFAULT_BUDGET_MIN
    effective_budget_max = budget_max if budget_max is not None else DEFAULT_BUDGET_MAX
    overhead_pct = settings.AI_OVERHEAD_PERCENT

    budget_with_overhead = float(lot.budget) * (1 + overhead_pct / 100)

    max_doc_length = 10000
    doc_preview = documentation_text[:max_doc_length]
    if len(documentation_text) > max_doc_length:
        doc_preview += f"\n\n[... –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—Ä–µ–∑–∞–Ω, –≤—Å–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤: {len(documentation_text)}]"

    return DOCUMENTATION_ANALYSIS_USER_TEMPLATE.format(
        platform_name=lot.platform_name,
        lot_number=lot.lot_number,
        title=lot.title,
        customer=lot.customer or "–Ω–µ —É–∫–∞–∑–∞–Ω",
        nomenclature=", ".join(lot.nomenclature or []) or "–Ω–µ —É–∫–∞–∑–∞–Ω–∞",
        budget_value=f"{lot.budget:,.0f}",
        budget_with_overhead=f"{budget_with_overhead:,.0f}",
        overhead_pct=overhead_pct,
        effective_budget_min=f"{effective_budget_min:,}",
        effective_budget_max=f"{effective_budget_max:,}",
        deadline=lot.deadline,
        status=lot.status,
        lot_description=(lot.description or "")[:500],
        documentation_preview=doc_preview,
    )
```

–ò –≤ `analyze_documentation`:

```python
async def analyze_documentation(lot: Lot, documentation_text: str, budget_min: int | None = None, budget_max: int | None = None) -> str:
    user_content = _documentation_to_prompt(lot, documentation_text, budget_min, budget_max)
    messages = [
        {"role": "system", "content": DOCUMENTATION_ANALYSIS_SYSTEM_PROMPT},
        {"role": "user", "content": user_content},
    ]
    return await ask_perplexity(messages, max_tokens=2500)
```


***

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –ü–û–ò–°–ö–ê –ü–û–°–¢–ê–í–©–ò–ö–û–í

```python
# =========================
# PROMPTS: SEARCH SUPPLIERS
# =========================

SUPPLIERS_SEARCH_SYSTEM_PROMPT = """
–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–∏—Å–∫—É —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤.
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
- –ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã.
- –£–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ —Ç–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞–π–¥–µ–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.
"""

SUPPLIERS_SEARCH_USER_TEMPLATE = """
–ù–∞–π–¥–∏ {max_suppliers} —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞: {product_name}

<–ê–õ–ì–û–†–ò–¢–ú –ü–û–ò–°–ö–ê>
1. –ò—Å–ø–æ–ª—å–∑—É–π –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–≤–∞–π –∫–æ–º–ø–∞–Ω–∏—è–º:
   - —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –≤–µ–±-—Å–∞–π—Ç–∞–º–∏,
   - —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏,
   - —Ä–∞–±–æ—Ç–∞—é—â–∏–º –≤ –†–æ—Å—Å–∏–∏.
3. –ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π e-mail –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
4. –ï—Å–ª–∏ –ø–æ —Ç–æ–≤–∞—Ä—É –º–∞–ª–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤, –≤—ã–≤–µ–¥–∏ —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏.
</–ê–õ–ì–û–†–ò–¢–ú –ü–û–ò–°–ö–ê>

<–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –û–¢–í–ï–¢–£>
–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ —É–∫–∞–∂–∏ –¢–û–õ–¨–ö–û:
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–ø–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ).
2. –í–µ–±-—Å–∞–π—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å).
3. –ì–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω (–µ—Å–ª–∏ —É–¥–∞—ë—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å).
4. –ò–ù–ù (–µ—Å–ª–∏ —É–¥–∞—ë—Ç—Å—è –Ω–∞–π—Ç–∏).

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | –°–∞–π—Ç: https://example.com | –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞ | –ò–ù–ù: 1234567890
2. ...
</–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –û–¢–í–ï–¢–£>
"""
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `search_suppliers_perplexity`:

```python
async def search_suppliers_perplexity(product_name: str, max_suppliers: int = 20) -> str:
    import re
    from services.suppliers.contact_parser import get_supplier_contacts

    clean_product_name = product_name.strip()[:200]

    user_prompt = SUPPLIERS_SEARCH_USER_TEMPLATE.format(
        product_name=clean_product_name,
        max_suppliers=max_suppliers,
    )

    messages = [
        {"role": "system", "content": SUPPLIERS_SEARCH_SYSTEM_PROMPT},
        {"role": "user", "content": user_prompt},
    ]

    max_tokens = 2000
    perplexity_result = await ask_perplexity(messages, max_tokens=max_tokens)

    # –¥–∞–ª—å—à–µ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤...
    ...
```


***

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –∫–æ–Ω—Å—Ç–∞–Ω—Ç —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —è–≤–Ω—ã–π `<–ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê>` –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ —Ç—ã –æ–±—ä—è—Å–Ω—è–ª –ø—Ä–æ —Ä–µ–¥–∫–æ—Å—Ç—å, —Å–∞–Ω–∫—Ü–∏–∏, –±—é–¥–∂–µ—Ç –∏ —Ñ–∞–∫—Ç–æ—Ä—ã. –¢—ã –º–æ–∂–µ—à—å —Å—Ä–∞–∑—É –≤—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–∏ –±–ª–æ–∫–∏ –≤ Cursor –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞/–∏–º–ø–æ—Ä—Ç—ã –ø–æ–¥ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç.

