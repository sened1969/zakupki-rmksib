"""
–§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø –ù–ï–ô–†–û-–°–û–¢–†–£–î–ù–ò–ö–ê –î–õ–Ø GOOGLE COLAB

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ Colab:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ Google Colab
2. –†–∞–∑–±–µ–π—Ç–µ –∫–æ–¥ –Ω–∞ —è—á–µ–π–∫–∏ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ # –Ø–ß–ï–ô–ö–ê)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —è—á–µ–π–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
4. –í –ø–æ—Å–ª–µ–¥–Ω–µ–π —è—á–µ–π–∫–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ main() –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á Perplexity –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PERPLEXITY_API_KEY
- –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ main()
"""

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
# ============================================================================
# !pip install httpx -q

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 2: –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
# ============================================================================
import httpx
import os
from typing import List, Dict, Optional
import asyncio

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 3: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ Perplexity API
# ============================================================================
async def ask_perplexity(
    messages: List[Dict[str, str]], 
    api_key: str,
    model: str = "sonar",
    temperature: float = 0.2, 
    max_tokens: int = 2000
) -> str:
    """
    –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ Perplexity API
    
    Args:
        messages: –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π (system + user)
        api_key: API –∫–ª—é—á Perplexity
        model: –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'sonar')
        temperature: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (0.0-1.0)
        max_tokens: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
    
    Returns:
        –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM
    """
    api_url = "https://api.perplexity.ai/chat/completions"
    
    headers = {
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json",
    }
    
    payload = {
        "model": model,
        "messages": messages,
        "temperature": temperature,
        "max_tokens": max_tokens,
    }
    
    async with httpx.AsyncClient(timeout=60.0) as client:
        try:
            response = await client.post(api_url, headers=headers, json=payload)
            response.raise_for_status()
            data = response.json()
            choices = data.get("choices", [])
            if not choices:
                return "–û—à–∏–±–∫–∞: –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API"
            return choices[0]["message"]["content"]
        except httpx.HTTPStatusError as e:
            return f"–û—à–∏–±–∫–∞ API: {e.response.status_code} - {e.response.text}"
        except Exception as e:
            return f"–û—à–∏–±–∫–∞: {str(e)}"

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 4: –§—É–Ω–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ—Ç–∞
# ============================================================================
async def analyze_lot_basic(
    lot_data: Dict[str, any],
    api_key: str,
    model: str = "sonar",
    budget_threshold: int = 3000000,
    overhead_percent: float = 15.0
) -> str:
    """
    –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞ –∑–∞–∫—É–ø–∫–∏
    
    Args:
        lot_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ª–æ—Ç–∞ (lot_number, platform_name, title, budget, deadline, customer, nomenclature, description)
        api_key: API –∫–ª—é—á Perplexity
        model: –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        budget_threshold: –ü–æ—Ä–æ–≥ –±—é–¥–∂–µ—Ç–∞ –≤ —Ä—É–±–ª—è—Ö
        overhead_percent: –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
    
    Returns:
        –¢–µ–∫—Å—Ç –∞–Ω–∞–ª–∏–∑–∞ –ª–æ—Ç–∞
    """
    prompt = f"""–ê–Ω–∞–ª–∏–∑ –∑–∞–∫—É–ø–∫–∏:
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {lot_data.get('platform_name', '–Ω–µ —É–∫–∞–∑–∞–Ω–∞')}
–ù–æ–º–µ—Ä –ª–æ—Ç–∞: {lot_data.get('lot_number', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
–ù–∞–∑–≤–∞–Ω–∏–µ: {lot_data.get('title', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–ë—é–¥–∂–µ—Ç (‚ÇΩ): {lot_data.get('budget', 0):,}
–î–µ–¥–ª–∞–π–Ω: {lot_data.get('deadline', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
–ó–∞–∫–∞–∑—á–∏–∫: {lot_data.get('customer', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞: {', '.join(lot_data.get('nomenclature', [])) or '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}

–û–ø–∏—Å–∞–Ω–∏–µ:
{lot_data.get('description', '–Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è')}

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç–≤–µ—Ç—É:
- –ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±—é–¥–∂–µ—Ç–∞ –ø–æ—Ä–æ–≥—É {budget_threshold:,} ‚ÇΩ —Å —É—á–µ—Ç–æ–º –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ {overhead_percent}% (–¥–∞–π —Ä–∞—Å—á–µ—Ç).
- –£–∫–∞–∂–∏ –∫–ª—é—á–µ–≤—ã–µ —Ä–∏—Å–∫–∏ –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —Å–Ω–∏–∂–µ–Ω–∏—è (2-4 –ø—É–Ω–∫—Ç–∞).
- –û–ø—Ä–µ–¥–µ–ª–∏ –≤—ã–≥–æ–¥—ã/–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (2-4 –ø—É–Ω–∫—Ç–∞).
- –î–∞–π —á–µ—Ç–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ: —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å/–Ω–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –ø–æ—á–µ–º—É (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è).
- –ü—Ä–µ–¥–ª–æ–∂–∏ 3-5 —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤ (–º–∞—Ä–∫–µ—Ä—ã, –∫–æ—Ä–æ—Ç–∫–æ).
–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: –∫—Ä–∞—Ç–∫–æ, –ø–æ –ø—É–Ω–∫—Ç–∞–º, –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π."""

    messages = [
        {
            "role": "system",
            "content": "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∑–∞–∫—É–ø–∫–∞–º –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏. –û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç –ø–æ –ø—É–Ω–∫—Ç–∞–º, –∏–∑–±–µ–≥–∞–π –≤–æ–¥—ã."
        },
        {
            "role": "user",
            "content": prompt
        }
    ]
    
    return await ask_perplexity(messages, api_key, model, max_tokens=1500)

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 5: –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏
# ============================================================================
async def analyze_lot_enhanced(
    lot_data: Dict[str, any],
    api_key: str,
    model: str = "sonar",
    budget_threshold: int = 3000000,
    overhead_percent: float = 15.0
) -> str:
    """
    –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏ –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ
    
    Args:
        lot_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ª–æ—Ç–∞
        api_key: API –∫–ª—é—á Perplexity
        model: –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        budget_threshold: –ü–æ—Ä–æ–≥ –±—é–¥–∂–µ—Ç–∞ –≤ —Ä—É–±–ª—è—Ö
        overhead_percent: –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
    
    Returns:
        –¢–µ–∫—Å—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏
    """
    budget = float(lot_data.get('budget', 0))
    budget_with_overhead = budget * (1 + overhead_percent / 100)
    
    enhanced_prompt = f"""–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–∫—É–ø–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤ —É—á–∞—Å—Ç–∏—è –≤ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä–µ:

<–î–ê–ù–ù–´–ï –õ–û–¢–ê>
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {lot_data.get('platform_name', '–Ω–µ —É–∫–∞–∑–∞–Ω–∞')}
–ù–æ–º–µ—Ä –ª–æ—Ç–∞: {lot_data.get('lot_number', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
–ù–∞–∑–≤–∞–Ω–∏–µ: {lot_data.get('title', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–ó–∞–∫–∞–∑—á–∏–∫: {lot_data.get('customer', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞: {', '.join(lot_data.get('nomenclature', [])) or '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}
–ë—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ (‚ÇΩ): {budget:,.0f}
–ë—é–¥–∂–µ—Ç —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ {overhead_percent}% (‚ÇΩ): {budget_with_overhead:,.0f}
–î–µ–¥–ª–∞–π–Ω: {lot_data.get('deadline', '–Ω–µ —É–∫–∞–∑–∞–Ω')}

–û–ø–∏—Å–∞–Ω–∏–µ:
{lot_data.get('description', '–Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è')}

</–î–ê–ù–ù–´–ï –õ–û–¢–ê>

<–ó–ê–î–ê–ß–ê>
–ü—Ä–æ–≤–µ–¥–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è –≤ –∫–æ–Ω–∫—É—Ä—Å–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä–µ. 
–û—Ü–µ–Ω–∏ –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ (0 = –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫/–ø—Ä–æ–±–ª–µ–º–∞, 10 = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫/–ø—Ä–æ–±–ª–µ–º–∞), 
–∑–∞—Ç–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞.

</–ó–ê–î–ê–ß–ê>

<–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>

1. –†–ï–î–ö–û–°–¢–¨/–ù–ò–®–ï–í–û–°–¢–¨ –¢–û–í–ê–†–ê (0-10):
   –û—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ä–µ–¥–∫–∏–π –∏–ª–∏ –Ω–∏—à–µ–≤—ã–π —Ç–æ–≤–∞—Ä.
   –§–æ—Ä–º–∞—Ç: '–†–µ–¥–∫–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞: X/10 - [–∫—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]'

2. –†–ò–°–ö–ò –°–ê–ù–ö–¶–ò–ô (0-10):
   –û—Ü–µ–Ω–∏ —Ä–∏—Å–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–∞–Ω–∫—Ü–∏—è–º–∏ —Å—Ç—Ä–∞–Ω –ï–≤—Ä–æ–ø–µ–π—Å–∫–æ–≥–æ —Å–æ—é–∑–∞.
   –§–æ—Ä–º–∞—Ç: '–†–∏—Å–∫–∏ —Å–∞–Ω–∫—Ü–∏–π: X/10 - [–∫—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]'

3. –ü–†–ï–í–´–®–ï–ù–ò–ï –ë–Æ–î–ñ–ï–¢–ê (0-10):
   –û—Ü–µ–Ω–∏, –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏ –±—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∫–∏ (—Å —É—á–µ—Ç–æ–º –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ {overhead_percent}%) 
   —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ {budget_threshold:,} ‚ÇΩ.
   –§–æ—Ä–º–∞—Ç: '–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞: X/10 - [–∫—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Å —Ä–∞—Å—á–µ—Ç–æ–º]'

4. –î–†–£–ì–ò–ï –°–£–©–ï–°–¢–í–ï–ù–ù–´–ï –§–ê–ö–¢–û–†–´ (0-10):
   –û—Ü–µ–Ω–∏ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã: —Å—Ä–æ–∫–∏ –ø–æ—Å—Ç–∞–≤–∫–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É, –ª–æ–≥–∏—Å—Ç–∏–∫–∞.
   –§–æ—Ä–º–∞—Ç: '–î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã: X/10 - [–∫—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]'

</–ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –û–¶–ï–ù–ö–ò>

<–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>
–†–∞—Å—Å—á–∏—Ç–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ = (–†–µ–¥–∫–æ—Å—Ç—å √ó 0.2) + (–°–∞–Ω–∫—Ü–∏–∏ √ó 0.3) + (–ë—é–¥–∂–µ—Ç √ó 0.3) + (–î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã √ó 0.2)
–§–æ—Ä–º–∞—Ç: '–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞: X.X/10 - [–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: –Ω–∏–∑–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫]'

</–†–ê–°–ß–ï–¢ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ò–°–ö–ê>

<–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò>
–ù–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –¥–∞–π —á–µ—Ç–∫—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:
- –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –æ—Ü–µ–Ω–∫–∞ ‚â§ 4.0)
- –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é (–µ—Å–ª–∏ –æ—Ü–µ–Ω–∫–∞ 4.1-6.0)
- –ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –æ—Ü–µ–Ω–∫–∞ > 6.0)
–ò –æ–±–æ—Å–Ω—É–π —Ä–µ—à–µ–Ω–∏–µ.

</–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò>

<–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

üìä –û–¶–ï–ù–ö–ò –ü–û –ü–ê–†–ê–ú–ï–¢–†–ê–ú:
1. –†–µ–¥–∫–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
2. –†–∏—Å–∫–∏ —Å–∞–Ω–∫—Ü–∏–π: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
3. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Å —Ä–∞—Å—á–µ—Ç–æ–º]
4. –î—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã: X/10 - [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]

üéØ –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê –†–ò–°–ö–ê: X.X/10
[–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: –Ω–∏–∑–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫]

‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: [–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å/–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é/–ù–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å]
[–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è]

üìã –ö–õ–Æ–ß–ï–í–´–ï –†–ò–°–ö–ò:
[2-4 –ø—É–Ω–∫—Ç–∞ —Å —Å–ø–æ—Å–æ–±–∞–º–∏ —Å–Ω–∏–∂–µ–Ω–∏—è]

üí° –í–û–ó–ú–û–ñ–ù–û–°–¢–ò/–í–´–ì–û–î–´:
[2-4 –ø—É–Ω–∫—Ç–∞]

üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:
[3-5 –º–∞—Ä–∫–µ—Ä–æ–≤, –∫–æ—Ä–æ—Ç–∫–æ]

</–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê>"""

    enhanced_messages = [
        {
            "role": "system",
            "content": (
                "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∑–∞–∫—É–ø–∫–∞–º –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ "
                "–æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤, —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. "
                "–û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Ç–æ—á–Ω–æ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, "
                "–∏–∑–±–µ–≥–∞–π –ª–∏—à–Ω–∏—Ö –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ "
                "–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–∞."
            )
        },
        {
            "role": "user",
            "content": enhanced_prompt
        }
    ]
    
    return await ask_perplexity(enhanced_messages, api_key, model, max_tokens=2000)

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 6: –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
# ============================================================================
async def search_suppliers(
    product_name: str,
    api_key: str,
    model: str = "sonar",
    max_suppliers: int = 5
) -> str:
    """
    –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    
    Args:
        product_name: –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
        api_key: API –∫–ª—é—á Perplexity
        model: –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        max_suppliers: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
    
    Returns:
        –¢–µ–∫—Å—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
    """
    supplier_prompt = f"""–ù–∞–π–¥–∏ {max_suppliers} —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞: {product_name}

–í–ê–ñ–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
- –ù–∞–π–¥–∏ {max_suppliers} –∫–æ–º–ø–∞–Ω–∏–π
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–≤–∞–π –∫–æ–º–ø–∞–Ω–∏—è–º —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –≤–µ–±-—Å–∞–π—Ç–∞–º–∏
- –ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π –∫–æ–Ω—Ç–∞–∫—Ç—ã (email, —Ç–µ–ª–µ—Ñ–æ–Ω—ã) - —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞–π–¥–µ–Ω–æ

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —É–∫–∞–∂–∏ –¢–û–õ–¨–ö–û:
  1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–ø–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
  2. –í–µ–±-—Å–∞–π—Ç (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
  3. –ì–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω)
  4. –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏)

–í–ê–ñ–ù–û: –ù–ï —É–∫–∞–∑—ã–≤–∞–π email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö!
–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | –°–∞–π—Ç: https://example.com | –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞ | –ò–ù–ù: 1234567890"""

    supplier_messages = [
        {
            "role": "system",
            "content": (
                f"–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–∏—Å–∫—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ –†–æ—Å—Å–∏–∏. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –Ω–∞–π—Ç–∏ {max_suppliers} –∫–æ–º–ø–∞–Ω–∏–π "
                "–¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞. –í–ê–ñ–ù–û: —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. "
                "–ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π –∫–æ–Ω—Ç–∞–∫—Ç—ã (email, —Ç–µ–ª–µ—Ñ–æ–Ω—ã). –£–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è, —Å–∞–π—Ç—ã, –≥–æ—Ä–æ–¥–∞ –∏ –ò–ù–ù. "
                "–û—Ç–≤–µ—á–∞–π —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç –ø–æ –ø—É–Ω–∫—Ç–∞–º."
            )
        },
        {
            "role": "user",
            "content": supplier_prompt
        }
    ]
    
    return await ask_perplexity(supplier_messages, api_key, model, max_tokens=2000)

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 7: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ª–æ—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# ============================================================================
def get_lot_data_from_input() -> Dict[str, any]:
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ input()
    
    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ª–æ—Ç–∞
    """
    print("\n" + "="*60)
    print("–í–í–û–î –î–ê–ù–ù–´–• –õ–û–¢–ê")
    print("="*60)
    print("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ª–æ—Ç–∞ (–Ω–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):\n")
    
    lot_number = input("–ù–æ–º–µ—Ä –ª–æ—Ç–∞: ").strip() or "123456789"
    platform_name = input("–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (–ü–ê–í–õ–ò–ö, –°–±–µ—Ä–±–∞–Ω–∫-–ê–°–¢ –∏ —Ç.–¥.): ").strip() or "–ü–ê–í–õ–ò–ö"
    title = input("–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏: ").strip() or "–ü–æ—Å—Ç–∞–≤–∫–∞ –º–µ—Ç–∏–∑–æ–≤ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞"
    budget_str = input("–ë—é–¥–∂–µ—Ç (‚ÇΩ): ").strip() or "2500000"
    budget = int(budget_str) if budget_str.isdigit() else 2500000
    deadline = input("–î–µ–¥–ª–∞–π–Ω (YYYY-MM-DD): ").strip() or "2025-12-15"
    customer = input("–ó–∞–∫–∞–∑—á–∏–∫: ").strip() or "–û–û–û '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ'"
    nomenclature_str = input("–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é): ").strip() or "–ú–µ—Ç–∏–∑—ã, –ö—Ä–µ–ø–µ–∂"
    nomenclature = [n.strip() for n in nomenclature_str.split(",") if n.strip()]
    description = input("–û–ø–∏—Å–∞–Ω–∏–µ: ").strip() or "–ü–æ—Å—Ç–∞–≤–∫–∞ –º–µ—Ç–∏–∑–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤: –±–æ–ª—Ç—ã, –≥–∞–π–∫–∏, —à–∞–π–±—ã, —à–ø–∏–ª—å–∫–∏. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –ì–û–°–¢, –æ—Ü–∏–Ω–∫–æ–≤–∫–∞. –°—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∫–∏: 30 –¥–Ω–µ–π."
    
    return {
        "lot_number": lot_number,
        "platform_name": platform_name,
        "title": title,
        "budget": budget,
        "deadline": deadline,
        "customer": customer,
        "nomenclature": nomenclature,
        "description": description
    }

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 8: –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞
# ============================================================================
async def main():
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–π—Ä–æ-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    """
    print("\n" + "="*60)
    print("–ù–ï–ô–†–û-–°–û–¢–†–£–î–ù–ò–ö: –ê–Ω–∞–ª–∏–∑ –∑–∞–∫—É–ø–æ–∫")
    print("="*60)
    
    # –ó–∞–ø—Ä–æ—Å API –∫–ª—é—á–∞
    api_key = input("\n–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Perplexity API –∫–ª—é—á (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è): ").strip()
    if not api_key:
        api_key = os.getenv('PERPLEXITY_API_KEY', '')
        if not api_key:
            print("‚ùå –û—à–∏–±–∫–∞: API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω!")
            print("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PERPLEXITY_API_KEY –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –≤—Ä—É—á–Ω—É—é.")
            return
    
    if not api_key.startswith('pplx-'):
        print("‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: API –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å 'pplx-'")
    
    # –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
    print("\n" + "="*60)
    print("–í–´–ë–û–† –†–ï–ñ–ò–ú–ê –†–ê–ë–û–¢–´")
    print("="*60)
    print("1. –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞")
    print("2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏")
    print("3. –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤")
    print("4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è)")
    
    choice = input("\n–í–∞—à –≤—ã–±–æ—Ä (1-4): ").strip()
    
    if choice == "1":
        # –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
        lot_data = get_lot_data_from_input()
        print("\n‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞...")
        result = await analyze_lot_basic(lot_data, api_key)
        print("\n" + "="*60)
        print("–†–ï–ó–£–õ–¨–¢–ê–¢ –ë–ê–ó–û–í–û–ì–û –ê–ù–ê–õ–ò–ó–ê –õ–û–¢–ê:")
        print("="*60)
        print(result)
        
    elif choice == "2":
        # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
        lot_data = get_lot_data_from_input()
        print("\n‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑...")
        result = await analyze_lot_enhanced(lot_data, api_key)
        print("\n" + "="*60)
        print("–†–ï–ó–£–õ–¨–¢–ê–¢ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ê–ù–ê–õ–ò–ó–ê –õ–û–¢–ê:")
        print("="*60)
        print(result)
        
    elif choice == "3":
        # –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
        product_name = input("\n–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤: ").strip()
        if not product_name:
            product_name = "–ú–µ—Ç–∏–∑—ã –æ—Ü–∏–Ω–∫–æ–≤–∞–Ω–Ω—ã–µ"
        max_suppliers = input("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5): ").strip()
        max_suppliers = int(max_suppliers) if max_suppliers.isdigit() else 5
        
        print(f"\n‚è≥ –ü–æ–∏—Å–∫ {max_suppliers} –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞: {product_name}...")
        result = await search_suppliers(product_name, api_key, max_suppliers=max_suppliers)
        print("\n" + "="*60)
        print("–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê –ü–û–°–¢–ê–í–©–ò–ö–û–í:")
        print("="*60)
        print(result)
        
    elif choice == "4":
        # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
        print("\n" + "="*60)
        print("–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –í–°–ï–• –§–£–ù–ö–¶–ò–ô")
        print("="*60)
        
        # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        test_lot_data = {
            "lot_number": "123456789",
            "platform_name": "–ü–ê–í–õ–ò–ö",
            "title": "–ü–æ—Å—Ç–∞–≤–∫–∞ –º–µ—Ç–∏–∑–æ–≤ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞",
            "budget": 2500000,
            "deadline": "2025-12-15",
            "customer": "–û–û–û '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ'",
            "nomenclature": ["–ú–µ—Ç–∏–∑—ã", "–ö—Ä–µ–ø–µ–∂"],
            "description": "–ü–æ—Å—Ç–∞–≤–∫–∞ –º–µ—Ç–∏–∑–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤: –±–æ–ª—Ç—ã, –≥–∞–π–∫–∏, —à–∞–π–±—ã, —à–ø–∏–ª—å–∫–∏. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –ì–û–°–¢, –æ—Ü–∏–Ω–∫–æ–≤–∫–∞. –°—Ä–æ–∫ –ø–æ—Å—Ç–∞–≤–∫–∏: 30 –¥–Ω–µ–π."
        }
        
        # 1. –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
        print("\n[1/3] –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ—Ç–∞...")
        result1 = await analyze_lot_basic(test_lot_data, api_key)
        print("\n–†–ï–ó–£–õ–¨–¢–ê–¢ –ë–ê–ó–û–í–û–ì–û –ê–ù–ê–õ–ò–ó–ê:")
        print("-"*60)
        print(result1[:500] + "..." if len(result1) > 500 else result1)
        
        # 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
        print("\n\n[2/3] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –æ—Ü–µ–Ω–∫–∞–º–∏...")
        result2 = await analyze_lot_enhanced(test_lot_data, api_key)
        print("\n–†–ï–ó–£–õ–¨–¢–ê–¢ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ê–ù–ê–õ–ò–ó–ê:")
        print("-"*60)
        print(result2[:500] + "..." if len(result2) > 500 else result2)
        
        # 3. –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
        print("\n\n[3/3] –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤...")
        result3 = await search_suppliers("–ú–µ—Ç–∏–∑—ã –æ—Ü–∏–Ω–∫–æ–≤–∞–Ω–Ω—ã–µ", api_key, max_suppliers=5)
        print("\n–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê –ü–û–°–¢–ê–í–©–ò–ö–û–í:")
        print("-"*60)
        print(result3[:500] + "..." if len(result3) > 500 else result3)
        
        print("\n" + "="*60)
        print("‚úÖ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê")
        print("="*60)
        
    else:
        print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é main() —Å–Ω–æ–≤–∞.")

# ============================================================================
# –Ø–ß–ï–ô–ö–ê 9: –¢–ï–°–¢–û–í–ê–Ø –Ø–ß–ï–ô–ö–ê - –ó–∞–ø—É—Å–∫ –≥–ª–∞–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
# ============================================================================
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç—É —è—á–µ–π–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –Ω–µ–π—Ä–æ-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
# await main()

